{"version":3,"sources":["render.js"],"names":["TipsType","tipsNormal","tipsPrimary","tipsSuccess","tipsInfo","tipsWarning","tipsDanger","TitleType","admin","owner","beforeRenderingHTML","data","chatboxClass","htmlStr","chatBox","document","querySelector","i","length","isRender","messageType","indexOf","renderTipHtml","html","renderMessageHtml","insertAdjacentHTML","setTimeout","scrollHeight","clientHeight","scrollTop","concat","position","diamond","headIcon","renderTitleHtml","htitle","htitleType","escapeHtml","name","content","css","unsafe","replace","c","charCodeAt","slice"],"mappings":";;;;GAAA,aAAA,IAAMA,SAAW,CACfC,WAAY,OACZC,YAAa,eACbC,YAAa,eACbC,SAAU,YACVC,YAAa,eACbC,WAAY,eAERC,UAAY,CAChBC,MAAO,QACPC,MAAO,SAGT,SAASC,oBAAoBC,EAAMC,GAGjC,IAFA,IAAIC,EAAU,GACVC,EAAUC,SAASC,cAAcJ,GAC5BK,EAAI,EAAGA,EAAIN,EAAKO,OAAQD,IAC3BN,EAAKM,GAAGE,YAGiC,IAAzCR,EAAKM,GAAGG,YAAYC,QAAQ,QAC9BR,GAAWS,cAAcX,EAAKM,GAAGM,KAAMvB,SAASW,EAAKM,GAAGG,cAAgB,QAExEP,GAAWW,kBAAkBb,EAAKM,IAEpCN,EAAKM,GAAGE,UAAW,GAGrBL,EAAQW,mBAAmB,YAAYZ,GACvCa,YAAW,WACLZ,EAAQa,aAAeb,EAAQc,eACjCd,EAAQe,UAAYf,EAAQa,aAC5Bb,EAAU,GACVD,EAAU,GAEd,GAAG,IACL,CAEA,SAASW,kBAAkBb,GACzB,MAAA,gBAAAmB,OAAuBnB,EAAKoB,SAAQ,0CAAAD,OACPnB,EAAKqB,QAAU,GAAK,SAAQ,WAAAF,OAAUnB,EAAKsB,SAAQ,4GAAAH,OAEpEI,gBAAgBvB,EAAKwB,OAAQ5B,UAAUI,EAAKyB,aAAe,IAAG,wBAAAN,OACxDO,WAAW1B,EAAK2B,OAAS,SAAQ,4DAAAR,OAEA,QAArBnB,EAAKS,YAAwBT,EAAKY,KAAOc,WAAW1B,EAAKY,MAAK,sBAE9F,CAEA,SAASW,gBAAgBK,EAASC,GAChC,OAAKD,EACL,uBAAAT,OAA8BU,EAAG,iCAAAV,OAAgCS,EAAO,WADnD,EAEvB,CAEA,SAASjB,cAAciB,EAASC,GAC9B,OAAKD,EACL,kCAAAT,OAAyCU,EAAG,mCAAAV,OAAkCO,WAAWE,GAAQ,iBAD5E,EAEvB,CAIA,SAASF,WAAWI,GAClB,OAAOA,aAAM,EAANA,EAAQC,QACb,2DACA,SAAAC,GAAC,MAAI,MAAQ,MAAQA,EAAEC,WAAW,IAAIC,OAAO,GAAK,GAAG,GAEzD","file":"../litewebchat_render.min.js","sourcesContent":["const TipsType = {\n  tipsNormal: 'tips',\n  tipsPrimary: 'tips-primary',\n  tipsSuccess: 'tips-success',\n  tipsInfo: 'tips-info',\n  tipsWarning: 'tips-warning',\n  tipsDanger: 'tips-danger',\n};\nconst TitleType = {\n  admin: 'admin',\n  owner: 'owner',\n};\n\nfunction beforeRenderingHTML(data, chatboxClass) {\n  let htmlStr = '';\n  let chatBox = document.querySelector(chatboxClass);\n  for (let i = 0; i < data.length; i++) {\n    if (data[i].isRender) {\n      continue;\n    }\n    if (data[i].messageType.indexOf('tips') !== -1) {\n      htmlStr += renderTipHtml(data[i].html, TipsType[data[i].messageType] || 'tips');\n    } else {\n      htmlStr += renderMessageHtml(data[i]);\n    }\n    data[i].isRender = true;\n  }\n\n  chatBox.insertAdjacentHTML('beforeend',htmlStr);\n  setTimeout(() => {\n    if (chatBox.scrollHeight > chatBox.clientHeight) {\n      chatBox.scrollTop = chatBox.scrollHeight;\n      chatBox = '';\n      htmlStr = '';\n    }\n  }, 300);\n}\n\nfunction renderMessageHtml(data) {\n  return `<div class=\"c${data.position} cmsg\">\n        <img class=\"headIcon ${data.diamond ? '' : 'radius'}\" src=\"${data.headIcon}\" ondragstart=\"return false;\" oncontextmenu=\"return false;\"/>\n        <span class=\"name\">\n            ${renderTitleHtml(data.htitle, TitleType[data.htitleType] || '')}\n            <span>${escapeHtml(data.name) || '&nbsp;'}</span>\n        </span>\n        <span class=\"content\">${data.messageType === 'raw' ? data.html : escapeHtml(data.html)}</span>\n    </div>`;\n}\n\nfunction renderTitleHtml(content, css) {\n  if (!content) return '';\n  return `<span class=\"htitle ${css}\" style=\"margin: 0 4px 0 0;\">${content}</span>`;\n}\n\nfunction renderTipHtml(content, css) {\n  if (!content) return '';\n  return `<div class=\"tips\"><span class=\"${css}\" style=\"margin-bottom: 20px;\">${escapeHtml(content)}</span></div>`;\n}\n\n// 转义 C0 Controls and Basic Latin 中非数字和字母，C1 Controls and Latin-1 Supplement 全部\n// https://www.w3schools.com/charsets/ref_html_utf8.asp\nfunction escapeHtml(unsafe) {\n  return unsafe?.replace(\n    /[\\u0000-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u00FF]/g,\n    c => '&#' + ('000' + c.charCodeAt(0)).slice(-4) + ';'\n  )\n}\n"]}